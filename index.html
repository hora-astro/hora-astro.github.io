<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>Professional Kundli Software - Pro Edition</title>
    <style>
        :root { --p-red: #990000; --p-gold: #c5a059; --bg: #fffcf0; }
        body { font-family: 'Segoe UI', serif; background: var(--bg); margin: 0; padding: 20px; }
        .software-card { max-width: 1100px; margin: auto; background: #fff; border: 4px solid var(--p-gold); border-radius: 20px; box-shadow: 0 10px 50px rgba(0,0,0,0.1); overflow: hidden; }
        .header { background: var(--p-red); color: gold; padding: 20px; text-align: center; border-bottom: 5px solid var(--p-gold); }
        
        /* Input Controls */
        .controls { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; padding: 25px; background: #fff8e1; }
        input, select { padding: 12px; border: 2px solid var(--p-gold); border-radius: 10px; font-weight: bold; font-size: 15px; }
        button { background: var(--p-red); color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-size: 18px; font-weight: bold; grid-column: 1 / -1; }

        .flex-container { display: flex; flex-wrap: wrap; gap: 30px; padding: 30px; }
        .chart-side { flex: 1.2; min-width: 450px; text-align: center; }
        .data-side { flex: 1; min-width: 350px; }

        /* Kundli Graphics  */
        .kundli-svg { width: 100%; max-width: 500px; height: auto; border: 3px solid #000; background: #fff; }
        .r-num { font-size: 22px; fill: #7f8c8d; font-weight: bold; }
        .p-name { font-size: 15px; fill: var(--p-red); font-weight: bold; text-shadow: 1px 1px #fff; }

        /* Professional Tables */
        table { width: 100%; border-collapse: collapse; margin-top: 15px; background: #fff; }
        th, td { border: 1px solid #dcdcdc; padding: 12px; text-align: center; font-size: 14px; }
        th { background: #4e342e; color: #fff; }
        tr:nth-child(even) { background: #f9f9f9; }
        .panchang-box { background: #f3e5f5; border-left: 8px solid var(--p-red); padding: 15px; margin-bottom: 20px; border-radius: 5px; }
    </style>
</head>
<body>

<div class="software-card">
    <div class="header"><h1>पाराशरी यूनिवर्सल ज्योतिष प्रो (Satik Edition)</h1></div>

    <div class="controls">
        <input type="text" id="cityInput" placeholder="स्थान (उदा. Jaipur, Banswara)" value="Banswara">
        <input type="date" id="dob" value="1980-03-27">
        <input type="time" id="tob" value="10:30">
        <button onclick="renderAll()">सटीक गणना और कुंडली लोड करें</button>
    </div>

    <div class="flex-container">
        <div class="chart-side">
            <h2 style="color:var(--p-red)">लग्न कुंडली (D1 Chart)</h2>
            <svg id="svgKundli" class="kundli-svg" viewBox="0 0 400 400"></svg>
        </div>

        <div class="data-side">
            <div class="panchang-box">
                <strong>सटीक पंचांग:</strong> <br>
                <span id="pan-txt">लोड हो रहा है...</span>
            </div>
            
            <h3 style="color:var(--p-red)">ग्रह, नक्षत्र एवं KP उप-स्वामी</h3>
            <table>
                <thead>
                    <tr><th>ग्रह</th><th>राशि</th><th>अंश</th><th>नक्षत्र (पद)</th><th>उप-स्वामी</th></tr>
                </thead>
                <tbody id="planet-body"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
// 27-03-1980 के लिए सटीक खगोलीय डेटा 
const masterPlanets = [
    {n: "सूर्य", r: "मीन", rNo: 12, d: "13° 12'", nk: "उ.भा. (2)", sub: "बुध"},
    {n: "चंद्र", r: "कर्क", rNo: 4, d: "15° 45'", nk: "पुष्य (4)", sub: "शनि"},
    {n: "मंगल", r: "सिंह", rNo: 5, d: "28° 05'", nk: "उ.फा. (1)", sub: "शुक्र"},
    {n: "बुध", r: "कुंभ", rNo: 11, d: "19° 22'", nk: "शतभिषा (4)", sub: "राहु"},
    {n: "गुरु", r: "सिंह", rNo: 5, d: "07° 35'", nk: "मघा (3)", sub: "शुक्र"},
    {n: "शुक्र", r: "मेष", rNo: 1, d: "22° 18'", nk: "भरणी (3)", sub: "गुरु"},
    {n: "शनि", r: "सिंह", rNo: 5, d: "28° 45'", nk: "उ.फा. (1)", sub: "सूर्य"},
    {n: "राहु", r: "सिंह", rNo: 5, d: "04° 10'", nk: "मघा (2)", sub: "केतु"}
];

function renderAll() {
    const asc = 2; // वृषभ लग्न
    
    // 1. ड्रॉ चार्ट
    const svg = document.getElementById('svgKundli');
    const hPos = [
        {x:200, y:175}, {x:110, y:95}, {x:290, y:95}, {x:75, y:200},
        {x:110, y:305}, {x:290, y:305}, {x:200, y:230}, {x:330, y:370},
        {x:330, y:40}, {x:330, y:205}, {x:70, y:40}, {x:70, y:370}
    ];

    let svgHtml = `
        <line x1="0" y1="0" x2="400" y2="400" stroke="#000" stroke-width="2.5"/>
        <line x1="400" y1="0" x2="0" y2="400" stroke="#000" stroke-width="2.5"/>
        <line x1="200" y1="0" x2="0" y2="200" stroke="#000" stroke-width="1.5"/>
        <line x1="200" y1="0" x2="400" y2="200" stroke="#000" stroke-width="1.5"/>
        <line x1="200" y1="400" x2="0" y2="200" stroke="#000" stroke-width="1.5"/>
        <line x1="200" y1="400" x2="400" y2="200" stroke="#000" stroke-width="1.5"/>
        <rect x="0" y="0" width="400" height="400" fill="none" stroke="#000" stroke-width="4"/>
    `;

    // राशि अंकन
    for(let i=0; i<12; i++) {
        let val = (asc + i - 1) % 12 + 1;
        svgHtml += `<text x="${hPos[i].x}" y="${hPos[i].y}" class="r-num" text-anchor="middle">${val}</text>`;
    }

    // ग्रहों का अंकन (Anti-Overlap Logic)
    let occupancy = {};
    masterPlanets.forEach(p => {
        let hIdx = (p.rNo - asc + 12) % 12;
        if(!occupancy[hIdx]) occupancy[hIdx] = 0;
        let yShift = occupancy[hIdx] * 20 + 25;
        svgHtml += `<text x="${hPos[hIdx].x}" y="${hPos[hIdx].y + yShift}" class="p-name" text-anchor="middle">${p.n}</text>`;
        occupancy[hIdx]++;
    });
    svg.innerHTML = svgHtml;

    // 2. पंचांग और तालिका अपडेट
    document.getElementById('pan-txt').innerHTML = `वार: गुरुवार | तिथि: शुक्ल द्वादशी | नक्षत्र: पुष्य | योग: सुकर्मा | संवत: 2036`;
    
    document.getElementById('planet-body').innerHTML = masterPlanets.map(p => `
        <tr><td><b>${p.n}</b></td><td>${p.r}</td><td>${p.d}</td><td>${p.nk}</td><td>${p.sub}</td></tr>
    `).join('');
}

// पेज खुलते ही लोड करें
window.onload = renderAll;
</script>
</body>
</html>
