<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hora Astro | Professional Astrology Suite</title>
    
    <style>
        :root { --gold: #f59e0b; --bg: #0f172a; --panel: #1e293b; --text: #f8fafc; }
        body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; }
        
        /* Header & Sidebar */
        .sidebar { width: 250px; background: #020617; height: 100vh; position: fixed; border-right: 1px solid #334155; padding: 25px; box-sizing: border-box; }
        .logo { color: var(--gold); font-size: 24px; font-weight: bold; text-align: center; border-bottom: 2px solid var(--gold); padding-bottom: 15px; margin-bottom: 30px; }
        
        /* Main Content */
        .main { margin-left: 250px; padding: 40px; min-height: 100vh; }
        .container { max-width: 1000px; margin: 0 auto; }
        
        .input-section { background: var(--panel); padding: 30px; border-radius: 15px; border: 1px solid #334155; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .grid-inputs { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; }
        
        label { display: block; margin-bottom: 8px; font-size: 14px; color: var(--gold); font-weight: 600; }
        input { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #475569; background: #0f172a; color: white; box-sizing: border-box; outline: none; }
        input:focus { border-color: var(--gold); }
        
        .btn-calc { background: var(--gold); color: black; font-weight: bold; border: none; padding: 15px; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 25px; font-size: 16px; text-transform: uppercase; transition: 0.3s; }
        .btn-calc:hover { background: #d97706; transform: translateY(-2px); }

        /* Output Area */
        #output { display: none; margin-top: 40px; }
        .chart-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 40px; }
        .chart-box { background: white; padding: 25px; border-radius: 15px; color: #000; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.4); }
        .chart-box h3 { color: #b91c1c; margin-top: 0; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .chart-box svg { width: 100%; height: auto; max-width: 450px; }

        /* Tables */
        .data-card { background: var(--panel); padding: 25px; border-radius: 15px; border: 1px solid #334155; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; background: #020617; border-radius: 10px; overflow: hidden; }
        th { background: #334155; color: var(--gold); padding: 15px; text-align: left; }
        td { padding: 12px 15px; border-bottom: 1px solid #1e293b; font-family: monospace; }

        #status-msg { text-align: center; font-weight: bold; margin: 20px 0; display: none; }
        
        @media (max-width: 900px) { .sidebar { display: none; } .main { margin-left: 0; } .chart-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="logo">HORA ASTRO</div>
        <p style="color: #94a3b8; font-size: 14px;">॥ सा विद्या या विमुक्तये ॥</p>
        <hr style="border: 0; border-top: 1px solid #334155; margin: 20px 0;">
        <div style="color: var(--gold);">✓ सटीक गणना</div>
        <div style="margin-top:10px;">✓ D1 & D9 चार्ट</div>
        <div style="margin-top:10px;">✓ ग्रह स्थिति</div>
    </div>

    <div class="main">
        <div class="container">
            <div class="input-section">
                <h2 style="margin-top:0; color: var(--gold);">प्रोफेशनल कुंडली इंजन</h2>
                <div class="grid-inputs">
                    <div><label>जन्म तिथि</label><input type="date" id="dob" value="1980-03-27"></div>
                    <div><label>समय</label><input type="time" id="tob" value="08:10"></div>
                    <div><label>अक्षांश (Lat)</label><input type="text" id="lat" value="23.5"></div>
                    <div><label>देशांतर (Lon)</label><input type="text" id="lon" value="74.4"></div>
                </div>
                <button class="btn-calc" onclick="generateProfessionalKundli()">कुंडली जनरेट करें</button>
            </div>

            <div id="status-msg"></div>

            <div id="output">
                <div class="chart-grid">
                    <div class="chart-box">
                        <h3>लग्न कुंडली (D1)</h3>
                        <div id="d1-svg"></div>
                    </div>
                    <div class="chart-box">
                        <h3>नवमांश कुंडली (D9)</h3>
                        <div id="d9-svg"></div>
                    </div>
                </div>

                <div class="data-card">
                    <h3 style="margin-top:0; color:var(--gold);">ग्रह स्पष्ट और स्थिति</h3>
                    <table id="planet-table">
                        <thead>
                            <tr>
                                <th>ग्रह</th>
                                <th>राशि सं.</th>
                                <th>अंश</th>
                                <th>नक्षत्र</th>
                            </tr>
                        </thead>
                        <tbody id="planet-body">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

<script>
    async function generateProfessionalKundli() {
        const dob = document.getElementById('dob').value;
        const tob = document.getElementById('tob').value;
        const lat = document.getElementById('lat').value;
        const lon = document.getElementById('lon').value;

        const status = document.getElementById('status-msg');
        const output = document.getElementById('output');
        
        status.style.display = "block";
        status.style.color = "var(--gold)";
        status.innerText = "सर्वर से गणना की जा रही है...";
        output.style.display = "none";

        const apiKey = "e7b14b21femsh6ee1327b27e7508p108379jsnf36df2f55b20"; 
        const dateParts = dob.split('-');

        const commonPayload = {
            "year": parseInt(dateParts[0]),
            "month": parseInt(dateParts[1]),
            "date": parseInt(dateParts[2]),
            "hours": parseInt(tob.split(':')[0]),
            "minutes": parseInt(tob.split(':')[1]),
            "seconds": 0,
            "latitude": parseFloat(lat),
            "longitude": parseFloat(lon),
            "timezone": 5.5,
            "config": {
                "observation_point": "topocentric",
                "ayanamsha": "lahiri",
                "language": "hi",
                "chart_style": "north_indian"
            }
        };

        try {
            // 1. D1 Chart Fetch
            const d1Response = await fetch('https://vedic-jyotish.p.rapidapi.com/d1-chart-svg-code', {
                method: 'POST',
                headers: { 'x-rapidapi-key': apiKey, 'x-rapidapi-host': 'vedic-jyotish.p.rapidapi.com', 'Content-Type': 'application/json' },
                body: JSON.stringify(commonPayload)
            });
            const d1Data = await d1Response.json();

            // 2. D9 Chart Fetch
            const d9Response = await fetch('https://vedic-jyotish.p.rapidapi.com/d9-chart-svg-code', {
                method: 'POST',
                headers: { 'x-rapidapi-key': apiKey, 'x-rapidapi-host': 'vedic-jyotish.p.rapidapi.com', 'Content-Type': 'application/json' },
                body: JSON.stringify(commonPayload)
            });
            const d9Data = await d9Response.json();

            // रिजल्ट दिखाना
            if(d1Data.svg_code) {
                document.getElementById('d1-svg').innerHTML = d1Data.svg_code;
                document.getElementById('d9-svg').innerHTML = d9Data.svg_code || "D9 चार्ट उपलब्ध नहीं";
                
                status.style.display = "none";
                output.style.display = "block";
            } else {
                throw new Error(d1Data.message || "विवरण गलत हैं");
            }

        } catch (error) {
            status.style.color = "#ef4444";
            status.innerText = "Error: " + error.message + ". अपनी API Key या Free Limit चेक करें।";
        }
    }
</script>
</body>
</html>
