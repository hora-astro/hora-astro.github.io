<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>Professional 50-Page Kundli</title>
    <style>
        :root { --maroon: #800000; --gold: #b8860b; }
        body { font-family: 'Segoe UI', Tahoma; margin: 0; background: #eee; }
        .toolbar { background: white; padding: 15px; border-bottom: 3px solid var(--maroon); display: flex; gap: 10px; justify-content: center; position: sticky; top:0; z-index:100; }
        .pdf-page { width: 210mm; min-height: 297mm; background: white; margin: 20px auto; padding: 25mm; box-shadow: 0 0 15px rgba(0,0,0,0.2); page-break-after: always; box-sizing: border-box; border: 1px solid #ddd; }
        .inner-border { border: 2px solid var(--maroon); height: 100%; padding: 20px; position: relative; }
        h1, h2 { color: var(--maroon); text-align: center; border-bottom: 2px solid var(--gold); padding-bottom: 10px; }
        .prediction-text { font-size: 17px; line-height: 1.8; text-align: justify; margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #999; padding: 10px; text-align: center; }
        .age-badge { background: var(--maroon); color: white; padding: 5px 15px; border-radius: 4px; font-weight: bold; }
    </style>
</head>
<body>

<div class="toolbar">
    <input type="text" id="custName" value="हेमंत पुरोहित" placeholder="नाम">
    <input type="date" id="dob" value="1980-03-27">
    <input type="time" id="tob" value="10:30">
    <input type="text" id="city" value="Banswara" placeholder="शहर">
    <button onclick="generate()" style="background:var(--maroon); color:white; border:none; padding:10px 20px; cursor:pointer; font-weight:bold;">50 पृष्ठ फलादेश तैयार करें</button>
</div>

<div id="report-container"></div>

<script>
const LORDS = ["", "मंगल", "शुक्र", "बुध", "चंद्र", "सूर्य", "बुध", "शुक्र", "मंगल", "गुरु", "शनि", "शनि", "गुरु"];
const HOUSES = ["", "प्रथम (व्यक्तित्व)", "द्वितीय (धन)", "तृतीय (पराक्रम)", "चतुर्थ (माता-सुख)", "पंचम (संतान-बुद्धि)", "षष्ठ (रोग-शत्रु)", "सप्तम (विवाह-व्यापार)", "अष्टम (आयु-संकट)", "नवम (भाग्य-धर्म)", "दशम (कर्म-पद)", "एकादश (लाभ)", "द्वादश (व्यय)"];

async function generate() {
    const res = await fetch('https://hemantpurohit27.pythonanywhere.com/calculate', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
            date: document.getElementById('dob').value,
            time: document.getElementById('tob').value,
            lat: "23.32", lon: "74.26"
        })
    });
    const data = await res.json();
    renderReport(data);
}

function renderReport(data) {
    let html = "";
    
    // Page 1: Introduction
    html += `<div class="pdf-page"><div class="inner-border"><h1>॥ वृहद ५० पृष्ठ जीवन विवरण ॥</h1><div style="text-align:center; margin-top:150px;"><h2>जातक: ${document.getElementById('custName').value}</h2><p>जन्म विवरण: ${document.getElementById('dob').value} | ${document.getElementById('tob').value}</p><p>नक्षत्र: ${data.avk.nak}</p></div></div></div>`;

    // Page 2: Planet Table
    html += `<div class="pdf-page"><div class="inner-border"><h2>ग्रह स्पष्ट एवं स्थिति</h2><table><tr><th>ग्रह</th><th>अंश</th><th>नक्षत्र</th><th>भाव</th><th>नवांश</th></tr>`;
    data.planets.forEach(p => {
        html += `<tr><td>${p.name}</td><td>${p.deg}</td><td>${p.nak}</td><td>${p.house}</td><td>${p.d9}</td></tr>`;
    });
    html += `</table></div></div>`;

    // Page 3-14: Detailed House Analysis
    for(let i=1; i<=12; i++) {
        let signIdx = (data.lagna.rIdx + i - 2) % 12 + 1;
        let lordName = LORDS[signIdx];
        let lordPos = data.planets.find(p => p.name === lordName).house;

        html += `<div class="pdf-page"><div class="inner-border"><h2>${HOUSES[i]} भाव का विश्लेषण</h2><div class="prediction-text">
        आपके <b>${HOUSES[i]}</b> का अधिपति <b>${lordName}</b> कुंडली के <b>${lordPos}</b> वें भाव में स्थित है।<br><br>
        <b>शास्त्रीय फलादेश:</b> ${getLordInHouseText(i, lordPos)}
        </div></div></div>`;
    }

    // Page 15-50: Age Based Amenities (0-100 years)
    for(let age=1; age<=36; age++) {
        let startAge = (age-1) * 3;
        html += `<div class="pdf-page"><div class="inner-border"><h2>जीवन यात्रा: आयु ${startAge} से ${startAge+3} वर्ष</h2><div class="prediction-text"><span class="age-badge">आयु खंड: ${startAge}-${startAge+3} वर्ष</span><br><br>
        ${getAmenityText(startAge)}
        </div></div></div>`;
    }

    document.getElementById('report-container').innerHTML = html;
}

function getLordInHouseText(h, p) {
    // यहाँ आप 144 योगों का टेक्स्ट डाल सकते हैं। उदाहरण के लिए:
    if(h === 10 && p === 11) return "दशमेश का एकादश में होना अत्यंत शुभ है। जातक अपने करियर से अपार धन और सुख-सुविधाएं अर्जित करेगा।";
    if(h === 4 && p === 1) return "चतुर्थेश का लग्न में होना जातक को अपनी मेहनत से बड़ा घर और लग्जरी गाड़ियां दिलवाता है।";
    return "भावाधिपति की यह स्थिति जीवन में संतुलित परिणाम देगी। जातक को इस भाव से संबंधित सुखों के लिए निरंतर प्रयास करने होंगे, जो समय के साथ फलीभूत होंगे।";
}

function getAmenityText(age) {
    if(age < 15) return "इस अवधि में जातक को उत्तम स्वास्थ्य, खिलौनों का सुख, माता का विशेष स्नेह और आधुनिक शिक्षा की सुविधाएं प्राप्त होंगी। पारिवारिक माहौल सुखद रहेगा।";
    if(age >= 21 && age <= 28) return "यह करियर निर्माण का समय है। जातक को अपना प्रथम वाहन, लैपटॉप, मोबाइल और पेशेवर जीवन के लिए आवश्यक सभी तकनीकी सुविधाएं प्राप्त होंगी।";
    if(age >= 30 && age <= 45) return "यह संचय का काल है। जातक को स्वयं का बड़ा घर, चार पहिया वाहन, संतान सुख और गृहस्थी की समस्त सुख-सुविधाओं का लाभ मिलेगा।";
    return "आध्यात्मिक सुख, संचित धन का उपभोग, तीर्थ यात्राएं और समाज में मान-सम्मान की प्राप्ति होगी।";
}
</script>
</body>
</html>
