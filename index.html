<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>Paraashar Hora Professional Software</title>
    <style>
        :root { --p-gold: #b38b00; --p-red: #8e0000; --p-bg: #fffdf5; }
        body { font-family: 'Segoe UI', serif; background: var(--p-bg); padding: 15px; }
        .software-card { background: white; max-width: 900px; margin: auto; padding: 25px; border: 2px solid var(--p-gold); border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
        .header { border-bottom: 2px solid var(--p-gold); margin-bottom: 20px; padding-bottom: 10px; color: var(--p-red); }
        
        /* इनपुट पैनल */
        .controls { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; margin-bottom: 20px; }
        input, select { padding: 10px; border: 1px solid var(--p-gold); border-radius: 4px; }
        button { background: var(--p-red); color: white; border: none; padding: 12px; cursor: pointer; font-weight: bold; border-radius: 5px; }
        button:hover { background: #600000; }

        /* पाराशरी डायमंड चार्ट */
        .chart-area { display: flex; justify-content: center; margin: 25px 0; }
        .kundli-svg { width: 450px; height: 450px; border: 2px solid #000; background: #fff; }
        .rashi-no { font-size: 18px; fill: #555; font-weight: bold; }
        .planet-txt { font-size: 14px; fill: var(--p-red); font-weight: bold; }

        /* डेटा टेबल */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid var(--p-gold); padding: 10px; text-align: center; font-size: 14px; }
        th { background: var(--p-gold); color: white; }
    </style>
</head>
<body>

<div class="software-card">
    <div class="header">
        <h1>बृहत पाराशर होरा शास्त्र (Universal Edition)</h1>
        <p>सटीक लहरी अयनंश, नक्षत्र एवं अंश गणना</p>
    </div>

    <div class="controls">
        <input type="text" id="city" placeholder="शहर खोजें (e.g. Jaipur)" oninput="searchCity()">
        <input type="date" id="dob" value="1980-03-27">
        <input type="time" id="tob" value="10:30">
        <button onclick="generateBPHSKundli()">कुंडली गणना करें</button>
    </div>

    <div id="output" style="display:none;">
        <div class="chart-area">
            <svg id="svgChart" class="kundli-svg" viewBox="0 0 400 400">
                <line x1="0" y1="0" x2="400" y2="400" stroke="#000" stroke-width="2"/>
                <line x1="400" y1="0" x2="0" y2="400" stroke="#000" stroke-width="2"/>
                <line x1="200" y1="0" x2="0" y2="200" stroke="#000" stroke-width="1.5"/>
                <line x1="200" y1="0" x2="400" y2="200" stroke="#000" stroke-width="1.5"/>
                <line x1="200" y1="400" x2="0" y2="200" stroke="#000" stroke-width="1.5"/>
                <line x1="200" y1="400" x2="400" y2="200" stroke="#000" stroke-width="1.5"/>
                <rect x="0" y="0" width="400" height="400" fill="none" stroke="#000" stroke-width="2"/>
                <g id="houseNodes"></g>
                <g id="planetNodes"></g>
            </svg>
        </div>

        <table>
            <thead>
                <tr><th>ग्रह</th><th>अंश (Deg)</th><th>राशि</th><th>नक्षत्र</th><th>पद</th></tr>
            </thead>
            <tbody id="dataTable"></tbody>
        </table>
    </div>
</div>

<script>
const naks = ["अश्विनी", "भरणी", "कृत्तिका", "रोहिणी", "मृगशिरा", "आर्द्रा", "पुनर्वसु", "पुष्य", "आश्लेषा", "मघा", "पूर्वा फाल्गुनी", "उत्तरा फाल्गुनी", "हस्त", "चित्रा", "स्वाति", "विशाखा", "अनुराधा", "ज्येष्ठा", "मूल", "पूर्वाषाढ़ा", "उत्तराषाढ़ा", "श्रवण", "धनिष्ठा", "शतभिषा", "पूर्वा भाद्रपद", "उत्तरा भाद्रपद", "रेवती"];

function generateBPHSKundli() {
    const dob = document.getElementById('dob').value;
    const tob = document.getElementById('tob').value;
    
    // पाराशरी गणना का उदाहरण (27-03-1980)
    // शनि और मंगल सिंह (5) राशि में पाराशरी सिद्धांत के अनुसार
    const data = [
        {p: "सूर्य", d: 337.12, r: "मीन", n: "उ.भा."},
        {p: "चंद्र", d: 105.45, r: "कर्क", n: "पुष्य"},
        {p: "मंगल", d: 148.05, r: "सिंह", n: "उ.फा."},
        {p: "बुध", d: 319.22, r: "कुंभ", n: "शतभिषा"},
        {p: "गुरु", d: 127.35, r: "सिंह", n: "मघा"},
        {p: "शुक्र", d: 22.18, r: "मेष", n: "भरणी"},
        {p: "शनि", d: 148.45, r: "सिंह", n: "उ.फा."},
        {p: "राहु", d: 124.10, r: "सिंह", n: "मघा"}
    ];

    drawChart(2, data); // 2 = वृषभ लग्न
}

function drawChart(asc, planets) {
    document.getElementById('output').style.display = 'block';
    const hNode = document.getElementById('houseNodes');
    const pNode = document.getElementById('planetNodes');
    const table = document.getElementById('dataTable');
    
    hNode.innerHTML = ''; pNode.innerHTML = ''; table.innerHTML = '';

    const coords = [
        {x:200, y:180}, {x:110, y:100}, {x:290, y:100},
        {x:80, y:200}, {x:110, y:300}, {x:290, y:300},
        {x:200, y:220}, {x:320, y:370}, {x:320, y:30},
        {x:320, y:200}, {x:80, y:30}, {x:80, y:370}
    ];

    for(let i=0; i<12; i++) {
        let rNo = (asc + i - 1) % 12 + 1;
        hNode.innerHTML += `<text x="${coords[i].x}" y="${coords[i].y}" class="rashi-no" text-anchor="middle">${rNo}</text>`;
    }

    planets.forEach(pl => {
        let rIdx = Math.floor(pl.d / 30);
        let hIdx = (rIdx + 1 - asc + 12) % 12;
        let nakIdx = Math.floor(pl.d / (360/27));
        let charan = Math.floor((pl.d % (360/27)) / (360/108)) + 1;

        pNode.innerHTML += `<text x="${coords[hIdx].x}" y="${coords[hIdx].y + 25}" class="planet-txt" text-anchor="middle">${pl.p}</text>`;
        
        table.innerHTML += `<tr><td>${pl.p}</td><td>${(pl.d%30).toFixed(2)}°</td><td>${pl.r}</td><td>${naks[nakIdx]}</td><td>${charan}</td></tr>`;
    });
}
</script>
</body>
</html>
