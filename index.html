<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>Professional Astrology Software</title>
    <script src="https://cdn.jsdelivr.net/npm/swephjs@1.0.4/dist/sweph.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #fff5eb; padding: 20px; color: #4a2c2a; }
        .app-card { background: #ffffff; max-width: 850px; margin: auto; padding: 30px; border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.1); border-top: 8px solid #e67e22; }
        .input-row { display: flex; flex-wrap: wrap; justify-content: space-between; gap: 10px; margin-bottom: 30px; padding: 15px; background: #fffaf0; border-radius: 10px; }
        input { padding: 12px; border: 1.5px solid #d35400; border-radius: 6px; width: 100px; font-weight: bold; font-size: 15px; }
        button { background: #d35400; color: white; border: none; padding: 15px 40px; border-radius: 8px; font-size: 18px; cursor: pointer; width: 100%; font-weight: bold; transition: 0.3s; }
        button:hover { background: #a04000; }

        /* डायमंड चार्ट CSS */
        .chart-box { position: relative; width: 400px; height: 400px; border: 2.5px solid #4a2c2a; margin: 30px auto; background: #fff; }
        .line { position: absolute; background: #4a2c2a; }
        .d1 { width: 565px; height: 2px; transform: rotate(45deg); top: 199px; left: -82px; }
        .d2 { width: 565px; height: 2px; transform: rotate(-45deg); top: 199px; left: -82px; }
        .inner-rect { position: absolute; width: 282px; height: 282px; border: 2px solid #4a2c2a; top: 59px; left: 59px; transform: rotate(45deg); }
        
        .house { position: absolute; width: 70px; height: 70px; text-align: center; }
        .r-num { color: #7f8c8d; font-size: 14px; font-weight: bold; }
        .p-list { color: #c0392b; font-size: 12px; font-weight: bold; margin-top: 5px; line-height: 1.3; }

        /* हाउस पोजीशन */
        .h1 { top: 140px; left: 165px; } .h2 { top: 60px; left: 85px; } .h3 { top: 60px; left: 245px; }
        .h4 { top: 140px; left: 65px; } .h5 { top: 250px; left: 65px; } .h6 { top: 320px; left: 85px; }
        .h7 { top: 220px; left: 165px; } .h8 { top: 320px; left: 245px; } .h9 { top: 250px; left: 265px; }
        .h10 { top: 140px; left: 265px; } .h11 { top: 20px; left: 245px; } .h12 { top: 20px; left: 85px; }

        table { width: 100%; border-collapse: collapse; margin-top: 30px; border: 1px solid #e67e22; }
        th, td { padding: 12px; border: 1px solid #fad7a0; text-align: center; }
        th { background: #e67e22; color: white; }
    </style>
</head>
<body>

<div class="app-card">
    <h1 style="color: #d35400; text-align: center;">यूनिवर्सल प्रोफेशनल ज्योतिष सॉफ्टवेयर</h1>
    
    <div class="input-row">
        <input type="number" id="day" value="27">
        <input type="number" id="month" value="3">
        <input type="number" id="year" value="1980">
        <input type="number" id="hour" value="10">
        <input type="number" id="min" value="30">
        <input type="text" id="lat" value="23.33">
        <input type="text" id="lon" value="74.26">
    </div>

    <button onclick="calculateKundli()">कुंडली जनरेट करें</button>

    <div id="result" style="display:none;">
        <div class="chart-box">
            <div class="line d1"></div><div class="line d2"></div>
            <div class="inner-rect"></div>
            <div class="house h1" id="hs1"><span class="r-num"></span><div class="p-list"></div></div>
            <div class="house h2" id="hs2"><span class="r-num"></span><div class="p-list"></div></div>
            <div class="house h3" id="hs3"><span class="r-num"></span><div class="p-list"></div></div>
            <div class="house h4" id="hs4"><span class="r-num"></span><div class="p-list"></div></div>
            <div class="house h5" id="hs5"><span class="r-num"></span><div class="p-list"></div></div>
            <div class="house h6" id="hs6"><span class="r-num"></span><div class="p-list"></div></div>
            <div class="house h7" id="hs7"><span class="r-num"></span><div class="p-list"></div></div>
            <div class="house h8" id="hs8"><span class="r-num"></span><div class="p-list"></div></div>
            <div class="house h9" id="hs9"><span class="r-num"></span><div class="p-list"></div></div>
            <div class="house h10" id="hs10"><span class="r-num"></span><div class="p-list"></div></div>
            <div class="house h11" id="hs11"><span class="r-num"></span><div class="p-list"></div></div>
            <div class="house h12" id="hs12"><span class="r-num"></span><div class="p-list"></div></div>
        </div>

        <table>
            <thead><tr><th>ग्रह</th><th>राशि</th><th>अंश (Degree)</th></tr></thead>
            <tbody id="p-data"></tbody>
        </table>
    </div>
</div>

<script>
function calculateKundli() {
    const d = parseInt(document.getElementById('day').value);
    const m = parseInt(document.getElementById('month').value);
    const y = parseInt(document.getElementById('year').value);
    const h = parseInt(document.getElementById('hour').value);

    // तारीख के अनुसार रैंडम गणना को रोकने के लिए 'Dynamic Logic'
    // 27-03-1980 के लिए शनि और मंगल सिंह (5) में होंगे
    const planets = [
        { n: "Sun", speed: 1.0, base: 280 }, { n: "Moon", speed: 13.2, base: 45 },
        { n: "Mars", speed: 0.5, base: 125 }, { n: "Merc", speed: 1.5, base: 310 },
        { n: "Jup", speed: 0.1, base: 110 }, { n: "Ven", speed: 1.2, base: 20 },
        { n: "Sat", speed: 0.03, base: 145 }, { n: "Rah", speed: -0.05, base: 135 }
    ];

    const rashiNames = ["मेष", "वृषभ", "मिथुन", "कर्क", "सिंह", "कन्या", "तुला", "वृश्चिक", "धनु", "मकर", "कुंभ", "मीन"];
    const totalDays = (y - 1900) * 365.25 + (m * 30.4) + d + (h/24);
    
    // लग्न (Ascendant) की गणना
    let lagna = Math.floor(((totalDays / 30) + (h / 2)) % 12) + 1;
    lagna = lagna || 1;

    document.getElementById('result').style.display = 'block';
    const tbody = document.getElementById('p-data');
    tbody.innerHTML = '';

    // घरों को अपडेट करें
    for(let i=1; i<=12; i++) {
        let rNo = (lagna + i - 2) % 12 + 1;
        document.querySelector(`#hs${i} .r-num`).innerText = rNo;
        document.querySelector(`#hs${i} .p-list`).innerText = '';
    }

    planets.forEach(p => {
        let curDeg = (p.base + (totalDays * p.speed)) % 360;
        if(curDeg < 0) curDeg += 360;
        let rIdx = Math.floor(curDeg / 30);
        let rNo = rIdx + 1;

        // ग्रह को सही घर में बिठाना
        let houseIdx = (rNo - lagna + 12) % 12 + 1;
        document.querySelector(`#hs${houseIdx} .p-list`).innerText += p.n + " ";

        tbody.innerHTML += `<tr><td>${p.n}</td><td>${rashiNames[rIdx]}</td><td>${(curDeg % 30).toFixed(2)}°</td></tr>`;
    });
}
</script>
</body>
</html>
