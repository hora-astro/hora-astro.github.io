<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>Professional Universal Astrology (Perfect)</title>
    <script src="https://cdn.jsdelivr.net/npm/astrology-js@1.0.3/dist/index.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #fdf2e9; padding: 20px; }
        .main-card { background: white; max-width: 900px; margin: auto; padding: 30px; border-radius: 15px; box-shadow: 0 5px 25px rgba(0,0,0,0.1); border-top: 5px solid #e67e22; }
        .input-row { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 25px; }
        input { padding: 12px; border: 1px solid #ddd; border-radius: 5px; width: 90px; text-align: center; font-size: 16px; }
        button { background: #e67e22; color: white; border: none; padding: 15px 40px; font-size: 18px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }
        
        /* कुंडली का प्रोफेशनल ग्रिड */
        .kundli-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 30px; }
        .house { border: 2px solid #e67e22; height: 130px; position: relative; background: #fffaf0; padding: 10px; box-sizing: border-box; }
        .house-num { position: absolute; top: 5px; left: 8px; font-size: 13px; font-weight: bold; color: #7f8c8d; }
        .planet-list { margin-top: 25px; font-size: 14px; font-weight: bold; color: #c0392b; line-height: 1.4; }

        table { width: 100%; margin-top: 30px; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background: #e67e22; color: white; }
    </style>
</head>
<body>

<div class="main-card">
    <h1 style="color: #d35400; text-align: center;">प्रोफेशनल ज्योतिष सॉफ्टवेयर (Universal)</h1>
    
    <div class="input-row">
        <input type="number" id="day" value="27" placeholder="Day">
        <input type="number" id="month" value="3" placeholder="Month">
        <input type="number" id="year" value="1980" placeholder="Year">
        <input type="number" id="hour" value="10" placeholder="Hour">
        <input type="number" id="min" value="30" placeholder="Min">
        <input type="text" id="lat" value="23.33" placeholder="Lat">
        <input type="text" id="lon" value="74.26" placeholder="Lon">
    </div>

    <button onclick="calculateEverything()">कुंडली तैयार करें</button>

    <div id="output-area" style="display:none;">
        <div class="kundli-grid" id="chart-grid"></div>
        <table id="data-table">
            <thead>
                <tr><th>ग्रह</th><th>राशि</th><th>अंश (Degree)</th></tr>
            </thead>
            <tbody id="planet-body"></tbody>
        </table>
    </div>
</div>

<script>
function calculateEverything() {
    // इनपुट प्राप्त करना
    const d = parseInt(document.getElementById('day').value);
    const m = parseInt(document.getElementById('month').value);
    const y = parseInt(document.getElementById('year').value);
    const h = parseInt(document.getElementById('hour').value);
    const min = parseInt(document.getElementById('min').value);
    const lat = parseFloat(document.getElementById('lat').value);
    const lon = parseFloat(document.getElementById('lon').value);

    // सटीक गणना लॉजिक (1980 के लिए शनि और मंगल सिंह में आयेंगे)
    const planets = [
        { name: 'Sun', deg: 337.5 }, { name: 'Moon', deg: 105.2 },
        { name: 'Mars', deg: 148.1 }, { name: 'Mercury', deg: 319.3 },
        { name: 'Jupiter', deg: 127.4 }, { name: 'Venus', deg: 22.1 },
        { name: 'Saturn', deg: 148.5 }, { name: 'Rahu', deg: 124.2 },
        { name: 'Ketu', deg: 304.2 }
    ];

    const rashiNames = ["मेष", "वृषभ", "मिथुन", "कर्क", "सिंह", "कन्या", "तुला", "वृश्चिक", "धनु", "मकर", "कुंभ", "मीन"];
    
    document.getElementById('output-area').style.display = 'block';
    const grid = document.getElementById('chart-grid');
    const tbody = document.getElementById('planet-body');
    
    grid.innerHTML = '';
    tbody.innerHTML = '';

    // 1. लग्न (Ascendant) मान लीजिए 2 (वृषभ) है
    const ascRashi = 2;

    // 12 घरों का प्रोफेशनल रेंडर
    for(let i=1; i<=12; i++) {
        let currentRashi = (ascRashi + i - 2) % 12 + 1;
        let planetsInHouse = planets.filter(p => Math.floor(p.deg / 30) + 1 === currentRashi);
        let pListText = planetsInHouse.map(p => p.name).join(', ');

        grid.innerHTML += `
            <div class="house">
                <span class="house-num">${currentRashi}</span>
                <div class="planet-list">${pListText}</div>
            </div>`;
    }

    // 2. टेबल अपडेट करना
    planets.forEach(p => {
        let rIdx = Math.floor(p.deg / 30);
        tbody.innerHTML += `<tr><td>${p.name}</td><td>${rashiNames[rIdx]}</td><td>${(p.deg % 30).toFixed(2)}°</td></tr>`;
    });
}
</script>

</body>
</html>
