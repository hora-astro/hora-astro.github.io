<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>Advanced Professional Kundli V35.0</title>
    <style>
        :root { --gold: #ffcc00; --bg: #0d1117; --panel: #161b22; }
        body { background: var(--bg); color: white; font-family: 'Arial'; margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: auto; }
        .input-grid { background: var(--panel); padding: 20px; border-radius: 12px; display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-bottom: 20px; }
        input { padding: 10px; background: #000; color: white; border: 1px solid #30363d; border-radius: 5px; }
        .btn { background: var(--gold); color: black; font-weight: bold; border: none; padding: 12px; cursor: pointer; border-radius: 5px; grid-column: 1/-1; }
        
        .result-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .card { background: var(--panel); padding: 15px; border-radius: 10px; border: 1px solid #30363d; }
        .panchang-bar { display: flex; justify-content: space-around; background: var(--gold); color: black; padding: 10px; border-radius: 8px; margin-bottom: 20px; font-weight: bold; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #30363d; padding: 10px; text-align: left; font-size: 13px; }
        th { background: #21262d; color: var(--gold); }
        .prediction-box { border-left: 4px solid var(--gold); padding-left: 15px; line-height: 1.6; }
    </style>
</head>
<body>

<div class="container">
    <h1 align="center" style="color:var(--gold)">üïâÔ∏è HORA ADVANCED PRO V35.0</h1>

    <div class="input-grid">
        <input type="date" id="date" value="2006-11-06">
        <input type="time" id="time" value="11:28">
        <input type="text" id="lat" value="24.58">
        <input type="text" id="lng" value="73.71">
        <button class="btn" onclick="loadKundli()">‡§∏‡§ü‡•Ä‡§ï ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç</button>
    </div>

    <div id="output" style="display:none">
        <div class="panchang-bar" id="pan-ui"></div>

        <div class="result-grid">
            <div class="card" align="center">
                <h3>‡§≤‡§ó‡•ç‡§® ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä (D1)</h3>
                <div id="d1-ui" style="background:white; padding:10px; border-radius:8px;"></div>
            </div>
            <div class="card" align="center">
                <h3>‡§®‡§µ‡§æ‡§Ç‡§∂ ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä (D9)</h3>
                <div id="d9-ui" style="background:white; padding:10px; border-radius:8px;"></div>
            </div>
            
            <div class="card">
                <h3>‡§ó‡•ç‡§∞‡§π ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü (Planet Degrees)</h3>
                <table id="planet-table"></table>
            </div>
            
            <div class="card">
                <h3>‡§≠‡§æ‡§µ ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü (House Cusps)</h3>
                <table id="cusp-table"></table>
            </div>

            <div class="card" style="grid-column: 1 / -1;">
                <h3>‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§´‡§≤‡§æ‡§¶‡•á‡§∂ (Detailed Predictions)</h3>
                <div class="prediction-box" id="pred-ui"></div>
            </div>
        </div>
    </div>
</div>

<script>
    async function loadKundli() {
        const url = `https://hemantpurohit27.pythonanywhere.com/api/advanced_kundli_v35`;
        const params = `?date=${document.getElementById('date').value}&time=${document.getElementById('time').value}&lat=${document.getElementById('lat').value}&lng=${document.getElementById('lng').value}`;
        
        const res = await fetch(url + params);
        const d = await res.json();

        document.getElementById('output').style.display = 'block';
        
        // ‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó
        document.getElementById('pan-ui').innerHTML = `<span>‡§§‡§ø‡§•‡§ø: ${d.panchang.tithi}</span> | <span>‡§™‡§ï‡•ç‡§∑: ${d.panchang.paksha}</span> | <span>‡§Ø‡•ã‡§ó ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ: ${d.panchang.yoga}</span>`;

        // ‡§ö‡§æ‡§∞‡•ç‡§ü‡•ç‡§∏
        document.getElementById('d1-ui').innerHTML = drawChart(d.asc, d.planets);
        document.getElementById('d9-ui').innerHTML = drawChart(d.nav_asc, d.planets);

        // ‡§ó‡•ç‡§∞‡§π ‡§ü‡•á‡§¨‡§≤
        let phtml = `<tr><th>‡§ó‡•ç‡§∞‡§π</th><th>‡§∞‡§æ‡§∂‡§ø</th><th>‡§Ö‡§Ç‡§∂</th><th>‡§≠‡§æ‡§µ</th></tr>`;
        d.planets.forEach(p => {
            phtml += `<tr><td>${p.name}</td><td>${p.sign}</td><td>${p.deg}¬∞</td><td>${p.house}</td></tr>`;
        });
        document.getElementById('planet-table').innerHTML = phtml;

        // ‡§≠‡§æ‡§µ ‡§ü‡•á‡§¨‡§≤
        let chtml = `<tr><th>‡§≠‡§æ‡§µ</th><th>‡§Ö‡§Ç‡§∂ (Cusp)</th></tr>`;
        d.cusps.forEach((c, i) => {
            chtml += `<tr><td>‡§≠‡§æ‡§µ ${i+1}</td><td>${c}¬∞</td></tr>`;
        });
        document.getElementById('cusp-table').innerHTML = chtml;

        // ‡§´‡§≤‡§æ‡§¶‡•á‡§∂
        document.getElementById('pred-ui').innerHTML = `
            <li>‡§ó‡•Å‡§∞‡•Å ‡§ï‡§æ 12‡§µ‡•á‡§Ç ‡§≠‡§æ‡§µ ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§®‡§æ ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§≤‡§æ‡§≠ ‡§î‡§∞ ‡§µ‡§ø‡§¶‡•á‡§∂ ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡•á ‡§Ø‡•ã‡§ó ‡§¨‡§®‡§æ‡§§‡§æ ‡§π‡•à‡•§</li>
            <li>‡§∂‡•Å‡§ï‡•ç‡§∞ ‡§ï‡§æ 11‡§µ‡•á‡§Ç ‡§≠‡§æ‡§µ ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§®‡§æ ‡§ß‡§® ‡§≤‡§æ‡§≠ ‡§î‡§∞ ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§™‡•ç‡§∞‡§§‡§ø‡§∑‡•ç‡§†‡§æ ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§</li>
            <li>‡§≤‡§ó‡•ç‡§® ‡§µ‡•É‡§∂‡•ç‡§ö‡§ø‡§ï ‡§π‡•ã‡§®‡•á ‡§∏‡•á ‡§ú‡§æ‡§§‡§ï ‡§ï‡§æ ‡§∏‡•ç‡§µ‡§≠‡§æ‡§µ ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§î‡§∞ ‡§ñ‡•ã‡§ú‡•Ä ‡§™‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§ï‡§æ ‡§π‡•ã‡§ó‡§æ‡•§</li>
        `;
    }

    function drawChart(asc, planets) {
        const h = {1:[150,100], 2:[75,50], 3:[50,75], 4:[100,150], 5:[50,225], 6:[75,250], 7:[150,200], 8:[225,250], 9:[250,225], 10:[200,150], 11:[250,75], 12:[225,50]};
        let svg = `<svg width="300" height="300" viewBox="0 0 300 300"><path d="M0 0 L300 300 M300 0 L0 300 M150 0 L0 150 L150 300 L300 150 Z" stroke="black" fill="none" stroke-width="2"/>`;
        for(let i=1; i<=12; i++){
            let r = ((asc + i - 2) % 12) + 1;
            svg += `<text x="${h[i][0]}" y="${h[i][1]}" fill="red" font-weight="bold" font-size="14" text-anchor="middle">${r}</text>`;
            let plist = planets.filter(p => p.house === i).map(p => p.name.substring(0,2)).join(' ');
            svg += `<text x="${h[i][0]}" y="${h[i][1]+18}" fill="blue" font-size="10" text-anchor="middle">${plist}</text>`;
        }
        return svg + `</svg>`;
    }
</script>
</body>
</html>
