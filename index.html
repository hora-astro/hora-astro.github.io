<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>HORA ASTRO ULTIMATE PRO V34.0</title>
    <style>
        :root { --accent: #ff9800; --bg: #0d1117; }
        body { background: var(--bg); color: white; font-family: 'Arial'; padding: 20px; }
        .input-bar { background: #161b22; padding: 20px; border-radius: 10px; display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        input { padding: 10px; border-radius: 5px; border: 1px solid #30363d; background: #0d1117; color: white; }
        .btn { background: var(--accent); color: black; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .charts-container { display: flex; gap: 20px; justify-content: center; background: white; padding: 20px; border-radius: 15px; }
        .chart-box { color: black; text-align: center; width: 400px; }
    </style>
</head>
<body>

    <h2 align="center" style="color:var(--accent)">üïâÔ∏è SIDDHANTA JYOTISH ENGINE V34.0</h2>

    <div class="input-bar">
        <input type="text" id="name" placeholder="‡§®‡§æ‡§Æ" value="Hemant Purohit">
        <input type="date" id="date" value="2006-11-06">
        <input type="time" id="time" value="11:28">
        <input type="text" id="lat" placeholder="‡§Ö‡§ï‡•ç‡§∑‡§æ‡§Ç‡§∂ (Lat)" value="24.58">
        <input type="text" id="lng" placeholder="‡§¶‡•á‡§∂‡§æ‡§Ç‡§§‡§∞ (Lng)" value="73.71">
        <button class="btn" onclick="generateKundli()">‡§∏‡§ü‡•Ä‡§ï ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§¶‡•á‡§ñ‡•á‡§Ç</button>
    </div>

    <div class="charts-container">
        <div class="chart-box">
            <h3>‡§≤‡§ó‡•ç‡§® ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä (D1)</h3>
            <div id="d1_chart"></div>
        </div>
        <div class="chart-box">
            <h3>‡§®‡§µ‡§æ‡§Ç‡§∂ ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä (D9)</h3>
            <div id="d9_chart"></div>
        </div>
    </div>

<script>
    async function generateKundli() {
        const url = `https://hemantpurohit27.pythonanywhere.com/api/pro_kundli_v34`;
        const params = `?date=${document.getElementById('date').value}&time=${document.getElementById('time').value}&lat=${document.getElementById('lat').value}&lng=${document.getElementById('lng').value}`;
        
        try {
            const resp = await fetch(url + params);
            const d = await resp.json();

            document.getElementById('d1_chart').innerHTML = drawNorthChart(d.asc, d.planets);
            document.getElementById('d9_chart').innerHTML = drawNorthChart(d.nav_asc, d.planets); // ‡§®‡§µ‡§Æ‡§æ‡§Ç‡§∂ ‡§ï‡•á ‡§≤‡§ø‡§è 8 (‡§µ‡•É‡§∂‡•ç‡§ö‡§ø‡§ï) ‡§≤‡§ó‡•ç‡§®
        } catch (e) {
            alert("Error connecting to PythonAnywhere API");
        }
    }

    function drawNorthChart(asc, planets) {
        const coords = {1:[150,100], 2:[75,50], 3:[50,75], 4:[100,150], 5:[50,225], 6:[75,250], 7:[150,200], 8:[225,250], 9:[250,225], 10:[200,150], 11:[250,75], 12:[225,50]};
        let svg = `<svg width="350" height="350" viewBox="0 0 300 300" style="border:1px solid #000">
            <path d="M0 0 L300 300 M300 0 L0 300 M150 0 L0 150 L150 300 L300 150 Z" stroke="black" fill="none"/>`;
        
        for(let i=1; i<=12; i++) {
            let r_num = ((asc + i - 2) % 12) + 1;
            svg += `<text x="${coords[i][0]}" y="${coords[i][1]}" font-size="16" fill="red" font-weight="bold" text-anchor="middle">${r_num}</text>`;
            
            let house_planets = planets.filter(p => p.house === i).map(p => p.name.substring(0,2)).join(' ');
            svg += `<text x="${coords[i][0]}" y="${coords[i][1]+20}" font-size="12" fill="blue" text-anchor="middle">${house_planets}</text>`;
        }
        return svg + `</svg>`;
    }
</script>
</body>
</html>
