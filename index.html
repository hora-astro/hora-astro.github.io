<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Professional Kundli Calculator</title>
<style>
body{font-family:Arial;background:#0c1020;color:#fff;padding:20px}
.container{max-width:780px;margin:auto}
label{margin-top:10px;display:block}
input{padding:6px;width:100%;border-radius:6px;border:1px solid #777}
.box{background:#141d33;padding:18px;border-radius:14px;margin-top:15px}
button{padding:10px 18px;border-radius:10px;border:0;background:#5fc6ff;color:#000;font-weight:bold}
pre{background:#000;padding:15px;border-radius:10px}
</style>
</head>

<body>
<div class="container">

<h2>Professional Kundli Calculator — Lahiri</h2>

<div class="box">
<label>DOB</label>
<input type="date" id="dob">

<label>Time</label>
<input type="time" id="tob" step="60">

<label>Latitude</label>
<input id="lat" value="24.48">

<label>Longitude</label>
<input id="lon" value="74.44">

<label>Timezone (IST=5.5)</label>
<input id="tz" value="5.5">

<button onclick="calc()">Generate</button>
</div>

<div class="box">
<pre id="out"></pre>
</div>

<script>
function rad(x){return x*Math.PI/180}
function deg(x){return x*180/Math.PI}

/* Julian Day */
function JD(y,m,d,h){
 if(m<=2){y--;m+=12;}
 let A=Math.floor(y/100)
 let B=2-A+Math.floor(A/4)
 return Math.floor(365.25*(y+4716))+Math.floor(30.6001*(m+1))+d+B-1524.5+h/24
}

/* Lahiri Ayanamsa */
function ayan(T){
 return 22.460148 + 1.396042*T + 0.000308*T*T
}

/* True obliquity */
function eps(T){
 return 23.439291-0.0130042*T
}

/* Meeus high-accuracy Moon longitude */
function moonLon(T){
 let L=218.3164477+481267.88123421*T
 let D=297.8501921+445267.1114034*T
 let M=357.5291092+35999.0502909*T
 let Mp=134.9633964+477198.8675055*T
 let F=93.2720950+483202.0175233*T

 let lon=L
 +6.289*Math.sin(rad(Mp))
 +1.274*Math.sin(rad(2*D-Mp))
 +0.658*Math.sin(rad(2*D))
 +0.214*Math.sin(rad(2*Mp))
 -0.186*Math.sin(rad(M))
 -0.114*Math.sin(rad(2*F))
 -0.059*Math.sin(rad(2*D-M- Mp))
 -0.057*Math.sin(rad(2*D-M))
 +0.053*Math.sin(rad(2*D+Mp))
 +0.046*Math.sin(rad(2*D-M))
 +0.041*Math.sin(rad(Mp-M))
 return (lon%360+360)%360
}

/* Sun longitude */
function sunLon(T){
 let L0=280.46646+36000.76983*T
 let M=357.52911+35999.05029*T
 let C=(1.914602-0.004817*T)*Math.sin(rad(M))
     +(0.019993)*Math.sin(rad(2*M))
     +0.000289*Math.sin(rad(3*M))
 return (L0+C)%360
}

/* Local Sidereal Time */
function LST(jd,lon){
 let T=(jd-2451545)/36525
 let th=280.46061837+360.98564736629*(jd-2451545)+0.000387933*T*T-(T*T*T)/38710000
 return (th+lon)%360
}

/* Ascendant */
function asc(lst,lat,eps){
 lat=rad(lat); eps=rad(eps); lst=rad(lst)
 let A=Math.atan2(
   -Math.cos(lst),
   Math.sin(lst)*Math.cos(eps)+Math.tan(lat)*Math.sin(eps)
 )
 return (deg(A)+180+360)%360
}

let rash=["Mesha","Vrishabha","Mithuna","Karka","Simha","Kanya","Tula","Vrishchika","Dhanu","Makara","Kumbha","Meena"]
function rname(x){return rash[Math.floor(x/30)]}

function calc(){
 let d=new Date(document.getElementById("dob").value)
 let t=document.getElementById("tob").value.split(":")
 let y=d.getFullYear(), m=d.getMonth()+1, dy=d.getDate()
 let tz=parseFloat(tz.value)
 let UT=parseInt(t[0])+parseInt(t[1])/60 - tz

 let jd=JD(y,m,dy,UT)
 let T=(jd-2451545)/36525

 let ay=ayan(T)
 let epsT=eps(T)

 let sun=(sunLon(T)-ay+360)%360
 let moon=(moonLon(T)-ay+360)%360

 let lst=LST(jd,parseFloat(lon.value))
 let as=(asc(lst,parseFloat(lat.value),epsT)-ay+360)%360

 out.innerText=
 "JD      : "+jd.toFixed(6)+"\n\n"+
 "Ayanamsa: "+ay.toFixed(6)+"°\n\n"+
 "Asc     : "+as.toFixed(3)+"°  ("+rname(as)+")\n"+
 "Sun     : "+sun.toFixed(3)+"°  ("+rname(sun)+")\n"+
 "Moon    : "+moon.toFixed(3)+"°  ("+rname(moon)+")\n"
}
</script>

</div>
</body>
</html>
